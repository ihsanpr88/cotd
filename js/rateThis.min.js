(function(a){var b={init:function(b){var c=a.extend({fullImg:"full.png",emptyImg:"empty.png",zero:!1,zeroImg:"zero.png",value:1,max:5,hover:!0,hoverImg:"hover.png",disabled:!1,disabledZeroImg:"zero.png",disabledFullImg:"full.png",disabledEmptyImg:"empty.png"},b);return this.each(function(){function h(a,c){if(!b.disabled){var e=a,f=b.cvalue;if(b.zero&&(e++,f++),a>b.cvalue)for(i=f;e>i;i++)d.next().find(".rateThis-obj").eq(i).hasClass("rateThis-0")||(2==c?d.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.hoverImg):d.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.fullImg));else if(b.cvalue>=a&&2>c)for(i=e;b.max>=i;i++)d.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.emptyImg);c||(b.cvalue=a,d.val(a))}}var b=this,d=a(this);if(b.max=c.max,b.disabled=c.disabled,b.cvalue=c.value,b.zero=c.zero,b.hover=c.hover,b.hoverImg=c.hoverImg,b.fullImg=c.fullImg,b.emptyImg=c.emptyImg,b.zeroImg=c.zeroImg,b.disabledZeroImg=c.disabledZeroImg,b.disabledFullImg=c.disabledFullImg,b.disabledEmptyImg=c.disabledEmptyImg,d.css("display","none"),d.after('<div class="rateThis"></div>'),b.disabled){var e=b.disabledZeroImg,f=b.disabledFullImg,g=b.disabledEmptyImg;d.prop("disabled",!0)}else var e=b.zeroImg,f=b.fullImg,g=b.emptyImg;for(b.zero&&d.next().append('<a href="#" style="border:none" class="rateThis-obj rateThis-0"><img src="'+e+'" /></a>'),i=1;b.max>=i;i++)i>b.cvalue?d.next().append('<a href="#" style="border:none" class="rateThis-obj rateThis-'+i+'"><img src="'+g+'" /></a>'):d.next().append('<a href="#" style="border:none" class="rateThis-obj rateThis-'+i+'"><img src="'+f+'" /></a>');return d.next().find(".rateThis-obj").each(function(c){b.zero||c++,a(this).on("click",function(){return h(c,0),!1}),b.hover&&(a(this).on("mouseenter",function(){h(c,2)}),a(this).on("mouseout",function(){h(parseInt(b.cvalue),1)}))}),this})},destroy:function(){return this.each(function(){var c=a(this);return c.attr("display","block"),c.next().remove(),this})},disable:function(){return this.each(function(){var b=this,c=a(this);if(b.zero){c.next().find(".rateThis-obj").eq(0).find("img").attr("src",b.disabledZeroImg);var d=b.cvalue}else var d=b.cvalue-1;return c.next().find(".rateThis-obj").each(function(a){c.next().find(".rateThis-obj").eq(a).hasClass("rateThis-0")||(a>d?c.next().find(".rateThis-obj").eq(a).find("img").attr("src",b.disabledEmptyImg):c.next().find(".rateThis-obj").eq(a).find("img").attr("src",b.disabledFullImg))}),b.disabled=!0,c.prop("disabled",!0),this})},enable:function(){return this.each(function(){var b=this,c=a(this);if(b.zero){c.next().find(".rateThis-obj").eq(0).find("img").attr("src",b.zeroImg);var d=b.cvalue}else var d=b.cvalue-1;return c.next().find(".rateThis-obj").each(function(a){c.next().find(".rateThis-obj").eq(a).hasClass("rateThis-0")||(a>d?c.next().find(".rateThis-obj").eq(a).find("img").attr("src",b.emptyImg):c.next().find(".rateThis-obj").eq(a).find("img").attr("src",b.fullImg))}),b.disabled=!1,c.prop("disabled",!1),this})},update:function(){return this.each(function(){var b=this,c=a(this),d=parseInt(c.val()),e=d;if(b.zero&&(e=d+1),d>b.cvalue)for(i=0;e>i;i++)c.next().find(".rateThis-obj").eq(i).hasClass("rateThis-0")||(b.disabled?c.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.disabledFullImg):c.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.fullImg));else if(b.cvalue>=d)for(i=e;b.max>=i;i++)b.disabled?c.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.disabledEmptyImg):c.next().find(".rateThis-obj").eq(i).find("img").attr("src",b.emptyImg);return b.cvalue=d,this})}};a.fn.rateThis=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery.rateThis"),void 0):b.init.apply(this,arguments)}})(jQuery);